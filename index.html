<html>
  <head>
    <title>Calendar</title>
    <style>
      body, html {
        margin: 0px;
        padding: 0px;
      }
      iframe {
        display: block;
        margin: 50px auto;
      }
      .container-main {
        display: block;
        width: 800px;
      }
      .center {
        margin: auto;
      }
    </style>
  </head>
  <body>
    <iframe 
      src="https://calendar.google.com/calendar/embed?src=weijingjaylin%40gmail.com&ctz=America%2FLos_Angeles" 
      style="border: 0" width="800" height="600" frameborder="0" scrolling="no"></iframe>
    <div class="container-main center">
      <p>The purpose of this calendar is used for me to share my avalibility.</p>
      <p>
        You can also modify the calendar src to your gmail address if you have a public calendar. 
        eg. https://dotku.github.io/calendar/?src=YOUR_EMAIL_ADDRESS_HERE
      </p>
      <p>
        For advanced features, eg public booking, I would suggest checkout https://calendly.com.
      </p>
      <p>
        Thanks,<br/>
        Jay Lin
      </p>
    </div>
  </body>
  <script>
    let search = {};
    let iframeSrc = "https://calendar.google.com/calendar/embed?";
    let ifNewURL = false;
    window
      .location
      .search
      .substring(1)
      .split("&")
      .forEach(s => {
        let parts = s.split("=");
        search[parts[0]] = parts[1];
      });

    if (search.src || search.ctz) {
      for (let key in search) {
        iframeSrc += `${key}=${search[key]}&`;
      }
      ifNewURL = true;
    }

    if (ifNewURL) document.querySelector("iframe").src = iframeSrc;
    console.log(document.querySelector("iframe").src)
  </script>
</html>
